<!-- Google Tag Manager -->
<script>
  (function (w, d, s, l, i) {
    w[l] = w[l] || [];
    w[l].push({ "gtm.start": new Date().getTime(), event: "gtm.js" });
    var f = d.getElementsByTagName(s)[0],
      j = d.createElement(s),
      dl = l != "dataLayer" ? "&l=" + l : "";
    j.async = true;
    j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
    f.parentNode.insertBefore(j, f);
  })(window, document, "script", "dataLayer", "GTM-NSGV5VH");
</script>
<!-- End Google Tag Manager -->

<script type="module">
  import { pageviewCount } from "https://unpkg.com/@waline/client@v2/dist/pageview.mjs";
  console.log("init!")
  pageviewCount({
      serverURL: "https://blog.honoka.tech/waline/",
      // serverURL: "http://127.0.0.1:8360/",
      path: window.location.href,
    });
  document.addEventListener('pjax:complete', function () {
    console.log("count!")
    pageviewCount({
      serverURL: "https://blog.honoka.tech/waline/",
      // serverURL: "http://127.0.0.1:8360/",
      path: window.location.href,

      // 可选的，用于自定选择器，默认为 `'.waline-pageview-count'`
      // selector: 'waline-pageview-count',

      // 可选的，是否在获取时增加访问量，默认为 `true`
      // update: true,
    });

  })
</script>